{
  "services": [
    {
      "name": "service1",
      "local_port": 3213,
      "server_options": "check inter 2s rise 3 fall 2",
      "default_servers": [
        {
          "name": "default1",
          "host": "localhost",
          "port": 8423
        }
      ],
      "discovery": {
        "method": "zookeeper",
        "path": "/airbnb/service/service1",
        "hosts": [
          "zk0.airbnb.com:2181",
          "zk1.airbnb.com:2181"
        ]
      },
      "listen": [
        "mode http",
        "option httpchk /health",
        "http-check expect string OK"
      ]
    },
    {
      "name": "service2",
      "local_port": 3214,
      "server_options": "check inter 2s rise 3 fall 2",
      "default_servers": [
        {
          "name": "default1",
          "host": "localhost",
          "port": 8422
        }
      ],
      "discovery": {
        "method": "zookeeper",
        "path": "/airbnb/service/service2",
        "hosts": [
          "zk0.airbnb.com:2181",
          "zk1.airbnb.com:2181"
        ]
      },
      "listen": [
        "mode http",
        "option httpchk /health",
      ]
    }
  ],
  "haproxy": {
    "reload_command": "sudo service haproxy reload",
    "config_file_path": "/etc/haproxy/haproxy.cfg",
    "do_writes": false,
    "do_reloads": false,
    "global": [
      "daemon",
      "user haproxy",
      "group haproxy",
      "maxconn 4096",
      "log     127.0.0.1 local0",
      "log     127.0.0.1 local1 notice",
    ],
    "defaults": [
      "log      global",
      "option   dontlognull",
      "maxconn  2000",
      "retries  3",
      "timeout  connect 5s",
      "timeout  client  1m",
      "timeout  server  1m",
      "option   redispatch",
      "balance  roundrobin"
    ],
    "extra_sections": {
      "listen stats :3212": [
        "mode http",
        "stats enable",
        "stats uri /",
        "stats refresh 5s"
      ]
    }
  },
  "synapse": {
    "self_check_port": 3210,
    "self_check_proxy_port": 3211,
    "zk_servers": [
      "localhost:2181"
    ]
  }
}
